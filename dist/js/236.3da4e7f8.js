"use strict";(self["webpackChunkmkb_analysis"]=self["webpackChunkmkb_analysis"]||[]).push([[236],{2760:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-card",{attrs:{flat:"",color:"grey lighten-4"}},[s("v-card-actions",[s("v-stepper",{attrs:{vertical:"",width:"100%"},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("v-stepper-step",{attrs:{complete:t.step>1,step:"1"}},[t._v(" Departmentni tanlang ")]),s("v-stepper-content",{attrs:{step:"1"}},[s("v-select",{attrs:{outlined:"",placeholder:"Departmentni tanlang",items:t.departments,"item-text":"name","item-value":"id"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),s("v-stepper-step",{attrs:{complete:t.step>2,step:"2"}},[t._v(" Lavozimni tanlang ")]),s("v-stepper-content",{attrs:{step:"2"}},[s("v-select",{attrs:{outlined:"",placeholder:"Lavozimni tanlang",items:t.departmentPositions,"item-text":"name","item-value":"id"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),s("v-stepper-step",{attrs:{complete:t.step>3,step:"3"}},[t._v(" Lavozim majburiyatlari formasini to'ldiring ")]),s("v-stepper-content",{attrs:{step:"3"}},[s("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.sendApplication.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card",{attrs:{flat:""}},[s("v-card-text",[t._l(t.completedTasks,(function(e){return s("v-row",{key:e.id},[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-autocomplete",{attrs:{items:t.positionTasks,rules:t.requiredRules,"item-text":"name","item-value":"id",outlined:"",dense:"",placeholder:"Majburiyat nomi",hint:"Majburiyat nomini tanlang",required:""},model:{value:e.task_id,callback:function(s){t.$set(e,"task_id",s)},expression:"task.task_id"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-textarea",{attrs:{rules:t.requiredRules,outlined:"",dense:"",placeholder:"Qo'shimcha ma'lumot",hint:"Qo'shimcha ma'lumotni kiriting",required:"",rows:"1","auto-grow":""},model:{value:e.result,callback:function(s){t.$set(e,"result",s)},expression:"task.result"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{type:"number",rules:t.requiredRules,outlined:"",dense:"",placeholder:"Sarflangan vaqt",hint:"Sarflangan vaqtini kiriting",required:""},model:{value:e.time,callback:function(s){t.$set(e,"time",s)},expression:"task.time"}})],1),t.completedTasks.length>1?s("v-divider"):t._e()],1)})),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[t.positionTasks.length>t.completedTasks.length?s("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return e.preventDefault(),t.addTask.apply(null,arguments)}}},[t._v(" Qo'shish ")]):t._e()],1)],1)],2),s("v-card-actions",[s("v-btn",{staticClass:"ml-auto mt-6",attrs:{color:"primary",type:"submit",disabled:!t.valid},on:{click:function(e){return e.preventDefault(),t.sendApplication.apply(null,arguments)}}},[t._v(" Arizani jo'natish ")])],1)],1)],1)],1)],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{type:t.status},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[t._v(" "+t._s(t.message)+" ")])],1)},i=[],n=s(629),l={name:"BackOffice",data(){return{valid:!1,step:1,department:null,position:null,completedTasks:[{task_id:null,result:null,time:null}],requiredRules:[t=>!!t||"To'ldirilishi kerak"],status:null,message:null}},watch:{department(t){this.$store.dispatch("office/fetchDepartmentPositions",{departmentId:t}).then((()=>{this.step=2}))},position(t){this.$store.dispatch("office/fetchPositionTasks",{positionId:t}).then((()=>{this.step=3}))}},computed:{...(0,n.Se)("office",["departments","departmentPositions","positionTasks"])},created(){this.$store.dispatch("office/fetchDepartments",{officeType:"back"})},methods:{sendApplication(){this.$store.dispatch("office/sendApplication",{tasks:this.completedTasks}).then((t=>{"OK"===t.result&&(this.status="success",this.message="Ariza muvaffaqiyatli jo'natildi",this.$refs.form.reset())}))},addTask(){this.completedTasks.push({task_id:null,result:null,time:null})},resetTasks(){this.completedTasks=[{task_id:null,result:null,time:null}]}}},r=l,o=s(1001),p=s(3453),c=s.n(p),u=s(1835),d=s(680),m=s(3237),v=s(7118),f=s(2102),h=s(9846),k=s(1418),b=s(6232),_=s(2877),g=s(2973),T=s(3202),x=s(3446),y=s(8937),V=s(8975),Z=s(5978),q=s(4350),w=(0,o.Z)(r,a,i,!1,null,null,null),C=w.exports;c()(w,{VAutocomplete:u.Z,VBtn:d.Z,VCard:m.Z,VCardActions:v.h7,VCardText:v.ZB,VCol:f.Z,VContainer:h.Z,VDivider:k.Z,VForm:b.Z,VRow:_.Z,VSelect:g.Z,VSnackbar:T.Z,VStepper:x.Z,VStepperContent:y.Z,VStepperStep:V.Z,VTextField:Z.Z,VTextarea:q.Z})}}]);
//# sourceMappingURL=236.3da4e7f8.js.map