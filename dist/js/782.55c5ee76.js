"use strict";(self["webpackChunkmkb_analysis"]=self["webpackChunkmkb_analysis"]||[]).push([[782],{4417:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[t.user.length?a("v-card",{staticClass:"mb-2"},[a("v-card-title",[a("span",{staticClass:"headline font-weight-black"},[t._v("Foydalanuvchi ma'lumotlari")])]),a("v-card-text",[a("p",{staticClass:"text-h6"},[a("span",{staticClass:"font-weight-bold"},[t._v("Ismi: ")]),t._v(t._s(t.user[0].full_name)+" ")]),a("p",{staticClass:"text-h6"},[a("span",{staticClass:"font-weight-bold"},[t._v("Ishlash joyi: ")]),a("span",[t._v(t._s(t.user[0].branch_name)+", ")]),a("span",[t._v(t._s(t.user[0].structure_name)+", ")]),a("span",[t._v(t._s(t.user[0].position_name))])])])],1):t._e(),a("v-card",[a("v-card-title",[a("span",{staticClass:"ml-4 pb-5"},[t._v("Lavozim majburiyatlari formasini to'ldiring")])]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4",md:"2"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"ml-4",attrs:{label:"Sanani tanlang","prepend-icon":"mdi-calendar",readonly:"",outlined:"",dense:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",n,!1),s))]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[a("v-date-picker",{attrs:{"first-day-of-week":1},on:{input:function(e){t.dateMenu=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),t.user.length?a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.sendApplication.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[t._l(t.completedTasks,(function(e,s){return a("v-row",{key:e.id},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-autocomplete",{attrs:{items:t.user[1],rules:t.requiredRules,"item-value":"id","item-text":"task_name",outlined:"",dense:"",placeholder:"Majburiyat nomi",hint:"Majburiyat nomini tanlang",required:""},model:{value:e.task_id,callback:function(a){t.$set(e,"task_id",a)},expression:"task.task_id"}})],1),a("v-col",{attrs:{cols:"12",md:"1"}},[a("v-text-field",{attrs:{rules:t.requiredRules,type:"number",outlined:"",dense:"",placeholder:"Soni",hint:"Sonini kiriting",required:""},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"task.quantity"}})],1),a("v-col",{attrs:{cols:"12",md:"1"}},[a("v-text-field",{attrs:{type:"number",rules:t.hourRules,outlined:"",dense:"",placeholder:"Soat",hint:"",required:""},model:{value:e.hour,callback:function(a){t.$set(e,"hour",a)},expression:"task.hour"}})],1),a("v-col",{attrs:{cols:"12",md:"1"}},[a("v-text-field",{attrs:{type:"number",rules:t.minuteRules,outlined:"",dense:"",placeholder:"Daqiqa",hint:"",required:""},model:{value:e.minute,callback:function(a){t.$set(e,"minute",a)},expression:"task.minute"}})],1),a("v-col",{attrs:{cols:"12",md:t.completedTasks.length>1?2:3}},[a("v-textarea",{attrs:{rows:"1",outlined:"",dense:"",placeholder:"Qo'shimcha ma'lumot",hint:"Qo'shimcha ma'lumot","auto-grow":"",counter:"50"},model:{value:e.comment,callback:function(a){t.$set(e,"comment",a)},expression:"task.comment"}})],1),t.completedTasks.length>1?a("v-col",{attrs:{cols:"12",md:"1"}},[a("v-btn",{staticClass:"ml-5",attrs:{icon:"",color:"error"},on:{click:function(e){return e.preventDefault(),t.removeTask(s)}}},[a("v-icon",[t._v("mdi-close")])],1)],1):t._e(),t.completedTasks.length>1?a("v-divider"):t._e()],1)})),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[t.user[1].length>t.completedTasks.length?a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return e.preventDefault(),t.addTask.apply(null,arguments)}}},[t._v(" Qo'shish ")]):t._e()],1)],1)],2),a("v-card-actions",[a("v-spacer"),a("p",[a("span",[t._v("Umumiy sarflangan vaqt: ")]),t._v(t._s(t.totalSpentTime.days)+" kun, "+t._s(t.totalSpentTime.hours)+" soat, "+t._s(t.totalSpentTime.minutes)+" daqiqa ")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mt-6",attrs:{color:"primary",type:"submit",disabled:!t.valid},on:{click:function(e){return e.preventDefault(),t.sendApplication.apply(null,arguments)}}},[t._v(" Arizani jo'natish ")])],1)],1)],1):t._e()],1)],1)],1)],1),a("v-snackbar",{attrs:{color:t.status},model:{value:t.showSnackbar,callback:function(e){t.showSnackbar=e},expression:"showSnackbar"}},[t._v(" "+t._s(t.message)+" ")])],1)},n=[],l=a(629),i={name:"AddReportView",data(){return{valid:!1,department:null,position:null,dateMenu:!1,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),completedTasks:[{task_id:null,quantity:null,hour:null,minute:null,comment:null}],requiredRules:[t=>!!t||"To'ldirilishi kerak"],hourRules:[t=>!!t||"To'ldirilishi kerak",t=>t>=0&&t<=23||"Noto'g'ri kiritildi (0-23)"],minuteRules:[t=>!!t||"To'ldirilishi kerak",t=>t>=0&&t<=59||"Noto'g'ri kiritildi (0-59)"],showSnackbar:null,message:null,status:null}},computed:{...(0,l.Se)("office",["departments","departmentPositions","positionTasks"]),...(0,l.Se)("auth",["user"]),totalSpentTime(){let t=this.completedTasks.reduce(((t,e)=>t+60*Number(e.hour)+Number(e.minute)),0);const e=Math.floor(t/1440);t-=1440*e;const a=Math.floor(t/60);t-=60*a;const s=t;return{days:e,hours:a,minutes:s}}},methods:{sendApplication(){this.$store.dispatch("office/sendApplication",{tasks:this.completedTasks}).then((t=>{"OK"===t.result&&(this.showSnackbar=!0,this.status="success",this.message="Ariza muvaffaqiyatli jo'natildi",this.$refs.form.reset(),setTimeout((()=>{location.reload()}),1500))})).catch((()=>{this.showSnackbar=!0,this.status="error",this.message="Ariza jo'natishda xatolik yuz berdi"}))},addTask(){this.completedTasks.push({task_id:null,quantity:null,hour:null,minute:null,comment:null})},removeTask(t){this.completedTasks.splice(t,1)}},created(){this.$store.dispatch("auth/fetchUserData")},beforeDestroy(){clearTimeout()}},o=i,r=a(1001),u=a(3453),c=a.n(u),d=a(1835),m=a(680),p=a(2371),v=a(7118),h=a(2102),k=a(9846),f=a(9094),b=a(1418),_=a(6232),y=a(6428),T=a(6768),g=a(2877),x=a(3202),w=a(9762),S=a(5978),V=a(4350),q=(0,r.Z)(o,s,n,!1,null,"5aef1698",null),C=q.exports;c()(q,{VAutocomplete:d.Z,VBtn:m.Z,VCard:p.Z,VCardActions:v.h7,VCardText:v.ZB,VCardTitle:v.EB,VCol:h.Z,VContainer:k.Z,VDatePicker:f.Z,VDivider:b.Z,VForm:_.Z,VIcon:y.Z,VMenu:T.Z,VRow:g.Z,VSnackbar:x.Z,VSpacer:w.Z,VTextField:S.Z,VTextarea:V.Z})}}]);
//# sourceMappingURL=782.55c5ee76.js.map