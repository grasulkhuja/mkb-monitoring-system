"use strict";(self["webpackChunkmkb_analysis"]=self["webpackChunkmkb_analysis"]||[]).push([[14],{8818:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{flat:"",color:"grey lighten-4"}},[a("v-card-actions",[a("v-stepper",{attrs:{vertical:"",width:"100%"},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("v-stepper-step",{attrs:{complete:t.step>1,step:"1"}},[t._v(" Departmentni tanlang ")]),a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-select",{attrs:{outlined:"",placeholder:"Departmentni tanlang",items:t.departments,"item-text":"department_name","item-value":"id"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",outlined:""},on:{click:function(e){return e.preventDefault(),t.backToChooseOfficeType.apply(null,arguments)}}},[t._v(" Ofis turini tanlashga qaytish ")])],1)],1)],1),a("v-stepper-step",{attrs:{complete:t.step>2,step:"2"}},[t._v(" Lavozimni tanlang ")]),a("v-stepper-content",{attrs:{step:"2"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("v-select",{attrs:{outlined:"",placeholder:"Lavozimni tanlang",items:t.departmentPositions,"item-text":"position_name","item-value":"id"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",outlined:""},on:{click:function(e){return e.preventDefault(),t.backToChooseDepartment.apply(null,arguments)}}},[t._v(" Departament tanlashga qaytish ")])],1)],1)],1),a("v-stepper-step",{attrs:{complete:t.step>3,step:"3"}},[t._v(" Lavozim majburiyatlari formasini to'ldiring ")]),a("v-stepper-content",{attrs:{step:"3"}},[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.sendApplication.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",[t._l(t.completedTasks,(function(e,s){return a("v-row",{key:e.id},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-autocomplete",{attrs:{items:t.positionTasks,rules:t.requiredRules,"item-value":"id","item-text":"task_name",outlined:"",dense:"",placeholder:"Majburiyat nomi",hint:"Majburiyat nomini tanlang",required:""},model:{value:e.task_id,callback:function(a){t.$set(e,"task_id",a)},expression:"task.task_id"}})],1),a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-textarea",{attrs:{rules:t.requiredRules,outlined:"",dense:"",placeholder:"Qo'shimcha ma'lumot",hint:"Qo'shimcha ma'lumotni kiriting",required:"",rows:"1","auto-grow":""},model:{value:e.result,callback:function(a){t.$set(e,"result",a)},expression:"task.result"}})],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("v-text-field",{attrs:{type:"number",rules:t.requiredRules,outlined:"",dense:"",placeholder:"Sarflangan vaqt",hint:"Sarflangan vaqtini kiriting",required:""},model:{value:e.time,callback:function(a){t.$set(e,"time",a)},expression:"task.time"}})],1),a("v-col",{attrs:{cols:"12",md:"1"}},[t.completedTasks.length>1?a("v-btn",{staticClass:"ml-5",attrs:{icon:"",color:"error"},on:{click:function(e){return e.preventDefault(),t.removeTask(s)}}},[a("v-icon",[t._v("mdi-close")])],1):t._e()],1),t.completedTasks.length>1?a("v-divider"):t._e()],1)})),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[t.positionTasks.length>t.completedTasks.length?a("v-btn",{attrs:{color:"primary",outlined:""},on:{click:function(e){return e.preventDefault(),t.addTask.apply(null,arguments)}}},[t._v(" Qo'shish ")]):t._e()],1)],1)],2),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"mt-6",attrs:{color:"secondary",outlined:""},on:{click:function(e){return e.preventDefault(),t.backToChoosePosition.apply(null,arguments)}}},[t._v(" Lavozim tanlashga qaytish ")]),a("v-btn",{staticClass:"mt-6",attrs:{color:"primary",type:"submit",disabled:!t.valid},on:{click:function(e){return e.preventDefault(),t.sendApplication.apply(null,arguments)}}},[t._v(" Arizani jo'natish ")])],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "+t._s(t.status)+" "),a("v-snackbar",{attrs:{color:t.status},model:{value:t.showSnackbar,callback:function(e){t.showSnackbar=e},expression:"showSnackbar"}},[t._v(" "+t._s(t.message)+" ")])],1)},n=[],i=a(4367),o=(a(561),a(629)),l={name:"OfficeView",data:function(){return{valid:!1,step:1,department:null,position:null,completedTasks:[{task_id:null,result:null,time:null}],requiredRules:[function(t){return!!t||"To'ldirilishi kerak"}],showSnackbar:null,message:null}},watch:{department:function(t){var e=this;null!==t&&this.$store.dispatch("office/fetchDepartmentPositions",{departmentId:t}).then((function(){e.step=2}))},position:function(t){var e=this;null!==t&&this.$store.dispatch("office/fetchPositionTasks",{positionId:t}).then((function(){e.step=3}))}},computed:(0,i.Z)({},(0,o.Se)("office",["departments","departmentPositions","positionTasks"])),created:function(){this.$store.dispatch("office/fetchDepartments",{officeType:this.$store.state.office.officeType})},methods:{selectableTasks:function(t){console.log(t)},sendApplication:function(){var t=this;this.$store.dispatch("office/sendApplication",{tasks:this.completedTasks}).then((function(e){"OK"===e.result&&(t.showSnackbar=!0,t.status="success",t.message="Ariza muvaffaqiyatli jo'natildi",t.$refs.form.reset(),location.reload())})).catch((function(){t.showSnackbar=!0,t.status="error",t.message="Ariza jo'natishda xatolik yuz berdi"}))},addTask:function(){this.completedTasks.push({task_id:null,result:null,time:null})},backToChooseOfficeType:function(){location.reload()},backToChooseDepartment:function(){this.department=null,this.step=1},backToChoosePosition:function(){this.completedTasks=[{task_id:null,result:null,time:null}],this.$refs.form.reset(),this.position=null,this.step=2},removeTask:function(t){this.completedTasks.splice(t,1)}}},r=l,c=a(1001),p=a(3453),u=a.n(p),d=a(1835),m=a(680),v=a(3237),f=a(7118),h=a(2102),k=a(9846),b=a(1418),T=a(6232),_=a(6428),y=a(2877),g=a(2973),x=a(3202),V=a(9762),Z=a(3446),w=a(8937),C=a(8975),S=a(5978),D=a(4350),q=(0,c.Z)(r,s,n,!1,null,null,null),$=q.exports;u()(q,{VAutocomplete:d.Z,VBtn:m.Z,VCard:v.Z,VCardActions:f.h7,VCardText:f.ZB,VCol:h.Z,VContainer:k.Z,VDivider:b.Z,VForm:T.Z,VIcon:_.Z,VRow:y.Z,VSelect:g.Z,VSnackbar:x.Z,VSpacer:V.Z,VStepper:Z.Z,VStepperContent:w.Z,VStepperStep:C.Z,VTextField:S.Z,VTextarea:D.Z})}}]);
//# sourceMappingURL=14-legacy.afa86cd4.js.map